<!DOCTYPE html>
<html>
  <head>

    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

  <body>

    <% if @cart.item_count %>
    <div class="cart-count">
      <%= @cart.item_count %>
    </div>
    <% end %>

    <!-- Dropdown Structure -->
    <ul id="dropdown1" class="dropdown-content">

      <!-- Dropdown for user -->
      <% if current_user%>
      <li><a href="#!">Logged in as: <%= @current_user.username %></a></li>
      <li class="divider"></li>
      <li><a href="#!">Orders</a></li>
      <li><a href="#!">Profile</a></li></div>
      <li><%= link_to "Logout", logout_path, method: :delete %></li>

      <!-- Dropdown for guest -->
      <% else %>
      <li><%= link_to "Signup", new_user_path %></li>
      <li><%= link_to "Login", login_path %></li>
      <% end %>


    </ul>
    <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper black">
        <a href="/" class="brand-logo center">Uncle Frank's Trash Emporium</a>
        <ul class="right hide-on-med-and-down">
          <li><%= link_to cart_path, class: "waves-effect waves-light btn-small" do %>
            <i class="large material-icons">shopping_cart</i>
            <% end %></li>
          <li><a class="dropdown-button" href="#!" data-activates="dropdown1"><i class="material-icons right">arrow_drop_down</i></a></li>
        </ul>
      </div>
    </nav>
    </div>

    <ul style="width:150px; margin-top:64px;" id="slide-out" class="side-nav fixed black white-text">
      <li>
        <h5>Categories</h5>
      </li>
      <li>
        <div class="divider"></div>
      </li>
      <div style="padding-left:20px">

        <li><%= link_to 'Bath', '/Bath', class: "white-text"  %></li>
        <li><%= link_to 'Furniture', '/Furniture', class: "white-text" %></li>
        <li><%= link_to 'Kitchen', '/Kitchen', class: "white-text"  %></li>
        <li><%= link_to 'Mattresses', '/Mattresses', class: "white-text"  %></li>
        <li><%= link_to 'Seasonal', '/Seasonal', class: "white-text"  %></li>

      </div>
      <li>
        <div class="divider"></div>
      </li>
      <br>
        <li>
          <h5><%= link_to 'All Items', items_path, class: "white-text"   %></h5>
        </li>
      </ul>

      <% flash.each do |type, message| %>
      <%= content_tag :div, sanitize(message), class: type %>
      <% end %>

      <div id="main">
        <% if !current_user %>
        <div class='loginbutton'>
          <%= render :partial => 'layouts/login_popup' %>
        </div>
        <% end %>
        <%= yield %>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
      </div>
    </body>

  </html>

</div>
